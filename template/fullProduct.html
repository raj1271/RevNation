{% extends 'Base.html' %}

{% load static %}
{% block container %}    
<div class="container product-container">
    <div class="row">
        <div class="col-md-4">
            <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-image">
        </div>
        <div class="col-md-8 pr">

            <div class="prd">
            <h1><i class="fas fa-motorcycle"></i> {{ product.name }}</h1>
            <p><strong><i class="fas fa-tags"></i> Brand:</strong> {{ product.brand }}</p>
            <p><strong><i class="fa-solid fa-money-bill-wave"></i> Price:</strong> ₹{{ product.price }}</p>
            <p><strong><i class="fas fa-box"></i> Stock Availability:</strong> 
                <span style="color: lightgreen;">In Stock</span>
            </p>
            <p><strong><i class="fas fa-helmet-safety"></i> Type:</strong> {{ product.type }} </p>
            <p><strong><i class="fas fa-certificate"></i> Certifications:</strong> {{ product.certifications }}</p>
            <p><strong><i class="fas fa-ruler"></i> Size:</strong> {{ product.size }}</p>
            <p><strong><i class="fas fa-palette"></i> Color:</strong> {{ product.color }}</p>
            {% if request.session.user_emailId is not None %}
            <div class="mt-4">
                <a href="{% url 'addtocart' category=category.title product_id=product.id %}" class="btn btn-custom">
                    <i class="fas fa-cart-plus"></i> Add to Cart
                </a>
                <button class="btn btn-custom"><i class="fas fa-bolt"></i> Buy Now</button>
            </div>
            
            {% endif %}
        </div>
        </div>
    </div>
</div>

<div class="container review-section">
    <h3><i class="fas fa-comments"></i> Customer Reviews</h3>
    {% if reviews %}
        {% for review in reviews %}
            <div class="review-card">
                <h5><i class="fas fa-user"></i> {{ review.user.username }}</h5>
                <p><i class="fas fa-star"></i> Rating: {{ review.rating }}/5</p>
                <p>{{ review.comment }}</p>
            </div>
        {% endfor %}
    {% else %}
        <p>No reviews yet.</p>
    {% endif %}
</div>
{% if request.session.user_emailId is not None %}
<div class="container mt-4">
    <h3><i class="fas fa-pen"></i> Leave a Review</h3>
    <form method="post">
        {% csrf_token %}
        <div class="mb-3">
            <label for="rating" class="form-label"><i class="fas fa-star"></i> Rating</label>
            <select class="form-control" id="rating" name="rating" required>
                <option value="5">⭐⭐⭐⭐⭐</option>
                <option value="4">⭐⭐⭐⭐</option>
                <option value="3">⭐⭐⭐</option>
                <option value="2">⭐⭐</option>
                <option value="1">⭐</option>
            </select>
        </div>
        <div class="mb-3">
            <label for="review" class="form-label"><i class="fas fa-comment"></i> Your Review</label>
            <textarea class="form-control" id="review" name="review" rows="4" required></textarea>
        </div>
        <button type="submit" class="btn btn-custom"><i class="fas fa-paper-plane"></i> Submit Review</button>
    </form>
</div>
{% endif %}
    {% endblock container %}